<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<body>

<div th:fragment="img-logo">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSV2QM2ty_66ss8TbZEzFZwmRiLZ-Hk-AE95Q&usqp=CAU"
         alt="Simpluencer">
</div>

<div th:fragment="text-email">
    <div class="input-group input-group-lg mb-3">
        <span class="input-group-text">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-at" viewBox="0 0 16 16">
              <path d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2H2Zm3.708 6.208L1 11.105V5.383l4.708 2.825ZM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2-7-4.2Z"/>
              <path d="M14.247 14.269c1.01 0 1.587-.857 1.587-2.025v-.21C15.834 10.43 14.64 9 12.52 9h-.035C10.42 9 9 10.36 9 12.432v.214C9 14.82 10.438 16 12.358 16h.044c.594 0 1.018-.074 1.237-.175v-.73c-.245.11-.673.18-1.18.18h-.044c-1.334 0-2.571-.788-2.571-2.655v-.157c0-1.657 1.058-2.724 2.64-2.724h.04c1.535 0 2.484 1.05 2.484 2.326v.118c0 .975-.324 1.39-.639 1.39-.232 0-.41-.148-.41-.42v-2.19h-.906v.569h-.03c-.084-.298-.368-.63-.954-.63-.778 0-1.259.555-1.259 1.4v.528c0 .892.49 1.434 1.26 1.434.471 0 .896-.227 1.014-.643h.043c.118.42.617.648 1.12.648Zm-2.453-1.588v-.227c0-.546.227-.791.573-.791.297 0 .572.192.572.708v.367c0 .573-.253.744-.564.744-.354 0-.581-.215-.581-.8Z"/>
            </svg>
        </span>
        <input id="text-email-username" type="text" class="form-control" placeholder="Username" aria-label="Username">
        <span class="input-group-text">@</span>
        <input id="text-email-server" type="text" class="form-control" placeholder="Server" aria-label="Server">
    </div>
</div>


<div th:fragment="text-password">
    <div class="input-group input-group-lg mb-3">
        <span class="input-group-text">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-lock" viewBox="0 0 16 16">
              <path d="M8 5a1 1 0 0 1 1 1v1H7V6a1 1 0 0 1 1-1zm2 2.076V6a2 2 0 1 0-4 0v1.076c-.54.166-1 .597-1 1.224v2.4c0 .816.781 1.3 1.5 1.3h3c.719 0 1.5-.484 1.5-1.3V8.3c0-.627-.46-1.058-1-1.224zM6.105 8.125A.637.637 0 0 1 6.5 8h3a.64.64 0 0 1 .395.125c.085.068.105.133.105.175v2.4c0 .042-.02.107-.105.175A.637.637 0 0 1 9.5 11h-3a.637.637 0 0 1-.395-.125C6.02 10.807 6 10.742 6 10.7V8.3c0-.042.02-.107.105-.175z"/>
              <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"/>
            </svg>
        </span>
        <input id="text-pw" type="password" class="form-control" placeholder="Password" aria-label="Password">
        <button id="button-pw-delete" class="btn btn-outline-dark" type="button" onclick="clearInput()" >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
            </svg>
        </button>
    </div>

    <script>
        function clearInput() {
            var input = document.getElementById('text-pw');
            input.value = '';
        }
    </script>
</div>


<div th:fragment="modal-reset-password">
    <button type="button" class="root-btn btn btn-secondary" data-bs-toggle="modal" data-bs-target="#resetPasswordModal">
        비밀번호 재설정
    </button>

    <div class="modal modal-root fade" id="resetPasswordModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                        비밀번호 재설정
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body grid gap-3">
                    <div class="p-2 g-col-6">
                        변경하고 싶은 이메일을 작성해주세요!<br>
                        입력한 이메일로 재설정 링크가 전달됩니다.
                    </div>
                    <div class="p-2 g-col-6 input-group input-group-lg mb-3">
                        <span class="input-group-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-at" viewBox="0 0 16 16">
                              <path d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2H2Zm3.708 6.208L1 11.105V5.383l4.708 2.825ZM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2-7-4.2Z"/>
                              <path d="M14.247 14.269c1.01 0 1.587-.857 1.587-2.025v-.21C15.834 10.43 14.64 9 12.52 9h-.035C10.42 9 9 10.36 9 12.432v.214C9 14.82 10.438 16 12.358 16h.044c.594 0 1.018-.074 1.237-.175v-.73c-.245.11-.673.18-1.18.18h-.044c-1.334 0-2.571-.788-2.571-2.655v-.157c0-1.657 1.058-2.724 2.64-2.724h.04c1.535 0 2.484 1.05 2.484 2.326v.118c0 .975-.324 1.39-.639 1.39-.232 0-.41-.148-.41-.42v-2.19h-.906v.569h-.03c-.084-.298-.368-.63-.954-.63-.778 0-1.259.555-1.259 1.4v.528c0 .892.49 1.434 1.26 1.434.471 0 .896-.227 1.014-.643h.043c.118.42.617.648 1.12.648Zm-2.453-1.588v-.227c0-.546.227-.791.573-.791.297 0 .572.192.572.708v.367c0 .573-.253.744-.564.744-.354 0-.581-.215-.581-.8Z"/>
                            </svg>
                        </span>
                        <input id="modal-text-email-username" type="text" class="form-control" placeholder="Username" aria-label="Username">
                        <span class="input-group-text">@</span>
                        <input id="modal-text-email-server" type="text" class="form-control" placeholder="Server" aria-label="Server">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="root-btn btn btn-dark modal-btn" onclick="clickResetPassword()">비밀번호 변경</button>
                    <button type="button" class="root-btn btn btn-secondary modal-btn" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function info() {
            doWhenInfo("이메일 전송 완료!!\n이메일로 링크를 보냈으니 확인해주세요!!");
        }

        function clickResetPassword() {
            const email = document.getElementById('modal-text-email-username').value;
            const server = document.getElementById('modal-text-email-server').value;

            if(!hasSomethingInString(email) || !hasSomethingInString(server)) {
                doWhenErr("빈 칸을 채워주세요.");
                return ;
            }

            patch(`/api/v1/user/unknown/password`, {
                body: {
                    email: `${email}@${server}`,
                },
            }).then(info).catch(doWhenErr);
        }
    </script>
</div>


<div th:fragment="btn-login" class="d-grid gap-2">
    <button type="button" class="btn btn-secondary" onclick="clickLogin()">
        로그인
    </button>

    <script>
        function clickLogin() {
            const email = document.getElementById('text-email-username').value;
            const server = document.getElementById('text-email-server').value;
            const pw = document.getElementById('text-pw').value;

            if(!hasSomethingInString(email) || !hasSomethingInString(server) || !hasSomethingInString(pw)) {
                doWhenErr("빈 칸을 채워주세요.");
                return ;
            }

            const formData = new URLSearchParams();
            formData.append('username', `${email}@${server}`);
            formData.append('password', pw);

            post(`/api/v1/auth/login`, {
                headers: getHeaderForm(),
                body: formData.toString(),
            }).catch(doWhenErr);
        }
    </script>
</div>


<div th:fragment="btn-signup">
    <button type="button" class="root-btn btn btn-secondary" th:onclick="|javascript:navigateTo('@{/user/create}')|">
        회원 가입
    </button>
</div>


<div th:fragment="text-password-again">
    <div class="input-group input-group-lg mb-3">
        <span class="input-group-text">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
              <path d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z"/>
            </svg>
        </span>
        <input id="text-pw-again" type="password" class="form-control" placeholder="Password Again" aria-label="Password">
        <button id="button-pw-delete-again" class="btn btn-outline-dark" type="button" onclick="clearInputAgain()" >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
            </svg>
        </button>
    </div>

    <script>
        function clearInputAgain() {
            var input = document.getElementById('text-pw-again');
            input.value = '';
        }
    </script>
</div>


<div th:fragment="text-nickname">
    <div class="input-group input-group-lg mb-3">
        <span class="input-group-text">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tags-fill" viewBox="0 0 16 16">
              <path d="M2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586V2zm3.5 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
              <path d="M1.293 7.793A1 1 0 0 1 1 7.086V2a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l.043-.043-7.457-7.457z"/>
            </svg>
        </span>
        <input id="text-nickname" type="text" class="form-control" placeholder="Nickname">
    </div>
</div>


<div th:fragment="btn-login-href">
    <button type="button" class="root-btn btn btn-secondary" th:onclick="|javascript:navigateTo('@{/auth/login}')|">
        로그인
    </button>
</div>


<div th:fragment="btn-signup-completion" class="d-grid gap-2">
    <button type="button" class="btn btn-secondary" onclick="clickSignUp()">
        회원 가입
    </button>

    <script>
        function clickSignUp() {
            const email = document.getElementById('text-email-username').value;
            const server = document.getElementById('text-email-server').value;
            const pw = document.getElementById('text-pw').value;
            const pw_again = document.getElementById('text-pw-again').value;
            const nickname = document.getElementById('text-nickname').value;

            if(!hasSomethingInString(email) || !hasSomethingInString(server) || !hasSomethingInString(pw) || !hasSomethingInString(nickname)) {
                doWhenErr("빈 칸을 채워주세요.");
                return ;
            }

            if(!hasSomethingInString(pw_again) || pw != pw_again) {
                doWhenErr("비밀번호 확인란의 값이 다릅니다. 다시 확인해주세요.");
                return ;
            }

            post(`/api/v1/user`, {
                body: {
                    email: `${email}@${server}`,
                    password: pw,
                    nickname: nickname,
                },
            }).catch(doWhenErr);
        }
    </script>
</div>


</body>

</html>